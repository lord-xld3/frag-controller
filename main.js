(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var n=e.g.document;if(!t&&n&&(n.currentScript&&(t=n.currentScript.src),!t)){var r=n.getElementsByTagName("script");if(r.length)for(var i=r.length-1;i>-1&&(!t||!/^http(s?):/.test(t));)t=r[i--].src}if(!t)throw Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})(),(()=>{function e(e,t){const n=e.getContext("webgl2",t);if(!n)throw Error("WebGL2 is not supported");return[n,function(t=e.clientWidth,r=e.clientHeight,i=0,o=0){n.viewport(i,o,t,r)},e instanceof HTMLCanvasElement?function(t=window.devicePixelRatio,n=e.clientWidth,r=e.clientHeight){return[e.width=n*t,e.height=r*t]}:function(t=window.devicePixelRatio,n=e.width,r=e.height){return[e.width=n*t,e.height=r*t]}]}function t(e,t){return{bind:()=>{t.down&&e.addEventListener("pointerdown",t.down),t.move&&e.addEventListener("pointermove",t.move),t.up&&(e.addEventListener("pointerup",t.up),e.addEventListener("pointercancel",t.up),e.addEventListener("pointerout",t.up),e.addEventListener("pointerleave",t.up)),t.wheel&&e.addEventListener("wheel",t.wheel,{passive:!1})},unbind:()=>{t.down&&e.removeEventListener("pointerdown",t.down),t.move&&e.removeEventListener("pointermove",t.move),t.up&&(e.removeEventListener("pointerup",t.up),e.removeEventListener("pointercancel",t.up),e.removeEventListener("pointerout",t.up),e.removeEventListener("pointerleave",t.up)),t.wheel&&e.removeEventListener("wheel",t.wheel)}}}function n(e,t,n=0,r=1,i=0,o=1,a="control"){const l=Object.assign(document.createElement("div"),{className:a}),s=Object.assign(document.createElement("label"),{textContent:t}),c=Object.assign(document.createElement("input"),{type:"range",id:t,name:t,step:r.toString(),min:i.toString(),max:o.toString(),value:n.toString()}),u=Object.assign(document.createElement("span"),{className:"tooltip",id:t+"-tooltip",textContent:n.toString()});return s.setAttribute("for",t),c.addEventListener("input",(()=>{u.textContent=c.value})),l.append(s,c,u),e.appendChild(l),c}function r(e,t,n,r){const i=e.createBuffer();function o(){e.bindBuffer(t,i)}function a(r){e.bufferData(t,r,n)}return r&&(o(),a(r)),{buf:i,bind:o,deleteBuffer:function(){e.deleteBuffer(i)},initBuffer:a,set:function(n,r=0,i=0,o){e.bufferSubData(t,r,n,i,o)},unbind:function(){e.bindBuffer(t,null)}}}const i=new Map;function o(e,t){const n=function(e,t,n){function r(t,n){if(i.has(n))return i.get(n);const r=e.createShader(t);if(e.shaderSource(r,n),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS))throw Error(e.getShaderInfoLog(r));return i.set(n,r),r}const o=e.createProgram(),a=r(e.VERTEX_SHADER,t),l=r(e.FRAGMENT_SHADER,n);if(e.attachShader(o,a),e.attachShader(o,l),e.linkProgram(o),!e.getProgramParameter(o,e.LINK_STATUS))throw Error(e.getProgramInfoLog(o));return o}(e,"#version 300 es\nin vec2 a;void main(){gl_Position=vec4(a,0,1);}",t),o=function(e){const t=e.createVertexArray();return{bind:()=>e.bindVertexArray(t),unbind:()=>e.bindVertexArray(null),delete:()=>e.deleteVertexArray(t)}}(e);return e.useProgram(n),o.bind(),r(e,e.ARRAY_BUFFER,e.STATIC_DRAW,new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1])),function(e,t,n){for(let r=0;r<n.length;r++){const{name:i,size:o,type:a,normalized:l,stride:s,offset:c,divisor:u}=n[r],d=e.getAttribLocation(t,i);-1!==d&&(e.enableVertexAttribArray(d),e.vertexAttribPointer(d,o,a||e.FLOAT,l||!1,s||0,c||0),u&&e.vertexAttribDivisor(d,u))}}(e,n,[{name:"a",size:2}]),o.unbind(),[n,function(){e.useProgram(n),o.bind(),e.drawArrays(e.TRIANGLES,0,6)}]}function a(e,t,n,r=0){const i=e.getUniformBlockIndex(t,n);function o(n=0){e.uniformBlockBinding(t,i,n)}return o(r),[e.getActiveUniformBlockParameter(t,i,e.UNIFORM_BLOCK_DATA_SIZE),o]}function l(e,t,n=0,i){const o=r(e,e.UNIFORM_BUFFER,e.STATIC_DRAW,new ArrayBuffer(t));return o.bindBuffer=function(t=0){e.bindBufferBase(e.UNIFORM_BUFFER,t,o.buf)},o.bindBuffer(n),i&&o.set(i),o}!function(){const n=document.getElementById("background"),[r,s,c]=e(n),[u,d]=o(r,"#version 300 es\nprecision highp float;uniform I{vec2 M,R;float T,Z;};out vec4 o;void main(){vec2 f=gl_FragCoord.xy*R-1.;float G=length(f),N=dot(M,M),A=radians((cos(T)-M.x)*G*90.)-M.x,B=sin(A),C=cos(A);f*=mat2(C,B,-B,C)*(4.+cos(T)+M.y)/Z;float W=T+abs(f.x*f.y)+sin(sin(T)*dot(f,f)),v=sin(3.*W+9.*N),V=1./fwidth(v);o=vec4((.5+.5*cos(W+N+vec3(0,2,4)))*smoothstep(1.,-1.,(abs(v)-.5)*V)+(smoothstep(-2.,6.,-abs(v))+smoothstep(1.,-1.,(v+.95)*V)-smoothstep(.5,2.,G)),1.);}");i.clear();const[m]=a(r,u,"I",0),f=l(r,m,0,new Float32Array([0,0,n.clientWidth,n.clientHeight,0,1])),p=document.getElementById("bg-fullscreen"),v=document.getElementById("bg-container"),h=document.getElementById("bg-fullscreen-container");let g;p.onclick=()=>{document.fullscreenElement?(document.exitFullscreen(),p.value="ðŸ”³"):(v.requestFullscreen(),p.value="ðŸ”²")},n.ondblclick=e=>{e.preventDefault(),h.style.display="none"===h.style.display?"flex":"none"};let w=[],A=1,b=0;t(n,{down:e=>{w.push(e),1===w.length&&n.setPointerCapture(e.pointerId),3===w.length&&(h.style.display="none"===h.style.display?"flex":"none")},move:e=>{let t=w.findIndex((t=>t.pointerId===e.pointerId));if(w[t]=e,1===w.length)f.set(new Float32Array([2*e.offsetX/n.clientWidth-1,2*-e.offsetY/n.clientHeight+1]),0);else if(2===w.length&&e.isPrimary){const[e,t]=w,n=Math.hypot(e.clientX-t.clientX,e.clientY-t.clientY);if(0===b)return b=n;f.set(new Float32Array([A=Math.max(A+(n-b)*A*g*4,.5)]),20),b=n}},up:e=>{w=w.filter((t=>t.pointerId!==e.pointerId)),w.length<2&&(b=0),n.releasePointerCapture(e.pointerId)},wheel:e=>{e.preventDefault(),f.set(new Float32Array([A=Math.max(A-e.deltaY*A*g,.5)]),20)}}).bind(),window.addEventListener("resize",(()=>{const[e,t]=c(2*window.devicePixelRatio);s(e,t),g=2/t,f.set(new Float32Array([2/e,g]),8)})),window.dispatchEvent(new Event("resize")),r.useProgram(u),r.clearColor(0,0,0,1),requestAnimationFrame((function e(t){r.clear(r.COLOR_BUFFER_BIT),f.set(new Float32Array([5e-5*t]),16),d(),requestAnimationFrame(e)}))}(),function(){const r=document.getElementById("mandelbrot-canvas"),[i,s,c]=e(r),[u,d]=o(i,"#version 300 es\n#define f gl_FragCoord.xy\nprecision highp float;uniform I{vec2 R,D;float T,Z;};uniform U{uvec2 J;vec2 E;vec3 C;};out vec4 o;void main(){float W=1./(exp(Z)*R.y),F=E.y*W+E.x,K=float(J.y-J.x);vec2 n=(f+f-R)*W+D,p=n,z=n*n;int i=0,H=int(K*pow(Z/12.,2.))+int(J.x);while(i<H&&z.x<F){n=vec2(z.x-z.y+p.x,2.*n.x*n.y+p.y);z=n*n;++i;}o=(i<H)?vec4(.5+.5*cos(4.+(float(i)+1.-log2(log2(dot(n,n))/log2(F)))*.1+C),1):vec4(0,0,0,1);}");let m=window.devicePixelRatio;const f=document.getElementById("mandelbrot"),p=document.getElementById("panel"),v=n(p,"Resolution scale",m,m/8,m/2,2*m),h=n(p,"Zoom",0,1e-4,0,12),g=n(p,"Min Iterations",80,1,1,400),w=n(p,"Max Iterations",400,1,80,1e3),A=n(p,"Min Escape Radius",6,1e-4,2,10),b=n(p,"Max Escape Radius",5e3,1e-4,6,1e4),y=n(p,"Hue",.6,1e-4,0,1);f.ondblclick=e=>{e.preventDefault(),p.style.display="none"===p.style.display?"flex":"none"};const[E]=a(i,u,"I",0),F=l(i,E,0,new Float32Array([r.clientWidth*m,r.clientHeight*m,-.74,.18,0,0]));let x,I=[],B=0,R=-.74,L=.18,S=Math.exp(-B),M=0;function P(e){S=Math.exp(-e),F.bind(),F.set(new Float32Array([e]),20)}t(r,{down:e=>{I.push(e),1===I.length&&r.setPointerCapture(e.pointerId),3===I.length&&(p.style.display="none"===p.style.display?"flex":"none")},move:e=>{let t=I.findIndex((t=>t.pointerId===e.pointerId));if(I[t]=e,1===I.length&&(R-=e.movementX*S*x,L+=e.movementY*S*x,F.bind(),F.set(new Float32Array([R,L]),8)),2===I.length&&e.isPrimary){const[e,t]=I,n=Math.hypot(e.clientX-t.clientX,e.clientY-t.clientY);if(0===M)return M=n;B+=(n-M)*x*2,M=n,h.value=B.toString(),P(B)}requestAnimationFrame(_)},up:e=>{I=I.filter((t=>t.pointerId!==e.pointerId)),I.length<2&&(M=0),r.releasePointerCapture(e.pointerId)},wheel:e=>{e.preventDefault(),P(B-=e.deltaY*x),h.value=B.toString(),requestAnimationFrame(_)}}).bind(),window.addEventListener("resize",(()=>{const[e,t]=c(m);s(e,t),x=2/r.clientHeight,F.bind(),F.set(new Float32Array([e,t])),requestAnimationFrame(_)})),window.dispatchEvent(new Event("resize"));const[C]=a(i,u,"U",1),T=l(i,C,1,new Uint32Array([80,400]));T.set(new Float32Array([6,5e3,-.8090169943749475,.05749048755480921,.8711414803576415]),8),v.oninput=()=>{m=v.valueAsNumber;const[e,t]=c(m);s(e,t),x=2/r.clientHeight,F.bind(),F.set(new Float32Array([e,t])),requestAnimationFrame(_)},h.oninput=()=>{B=h.valueAsNumber,P(B),requestAnimationFrame(_)},g.oninput=()=>{w.min=g.value,T.bind(),T.set(new Uint32Array([g.valueAsNumber]),0),requestAnimationFrame(_)},w.oninput=()=>{g.max=w.value,T.bind(),T.set(new Uint32Array([w.valueAsNumber]),4),requestAnimationFrame(_)},A.oninput=()=>{b.min=A.value,T.bind(),T.set(new Float32Array([A.valueAsNumber]),8),requestAnimationFrame(_)},b.oninput=()=>{T.bind(),T.set(new Float32Array([b.valueAsNumber]),12),requestAnimationFrame(_)},y.oninput=()=>{const e=y.valueAsNumber*Math.PI*2;T.bind(),T.set(new Float32Array([Math.cos(e),Math.cos(e+1),Math.cos(e+2)]),16),requestAnimationFrame(_)};const N=document.getElementById("mb-fullscreen");function _(){i.clear(i.COLOR_BUFFER_BIT),d()}N.onclick=()=>{document.fullscreenElement?(document.exitFullscreen(),N.value="ðŸ”³"):(f.requestFullscreen(),N.value="ðŸ”²")},i.useProgram(u),i.clearColor(0,0,0,1),requestAnimationFrame(_)}()})(),e.p})();