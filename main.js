(()=>{"use strict";(()=>{function e(e,n){const t=e.getContext("webgl2",n);if(!t)throw new Error("WebGL2 is not supported");return[t,function(n=e.clientWidth,i=e.clientHeight,o=0,r=0){t.viewport(o,r,n,i)},e instanceof HTMLCanvasElement?function(n=window.devicePixelRatio,t=e.clientWidth,i=e.clientHeight){return[e.width=t*n,e.height=i*n]}:function(n=window.devicePixelRatio,t=e.width,i=e.height){return[e.width=t*n,e.height=i*n]}]}function n(e,n){return{bind:()=>{n.down&&e.addEventListener("pointerdown",n.down),n.move&&e.addEventListener("pointermove",n.move),n.up&&(e.addEventListener("pointerup",n.up),e.addEventListener("pointercancel",n.up),e.addEventListener("pointerout",n.up),e.addEventListener("pointerleave",n.up)),n.wheel&&e.addEventListener("wheel",n.wheel,{passive:!1})},unbind:()=>{n.down&&e.removeEventListener("pointerdown",n.down),n.move&&e.removeEventListener("pointermove",n.move),n.up&&(e.removeEventListener("pointerup",n.up),e.removeEventListener("pointercancel",n.up),e.removeEventListener("pointerout",n.up),e.removeEventListener("pointerleave",n.up)),n.wheel&&e.removeEventListener("wheel",n.wheel)}}}function t(e,n,t=0,i=1,o=0,r=1,a="control"){const l=Object.assign(document.createElement("div"),{className:a}),s=Object.assign(document.createElement("label"),{textContent:n}),c=Object.assign(document.createElement("input"),{type:"range",id:n,name:n,step:i.toString(),min:o.toString(),max:r.toString(),value:t.toString()}),u=Object.assign(document.createElement("span"),{className:"tooltip",id:`${n}-tooltip`,textContent:t.toString()});return s.setAttribute("for",n),c.addEventListener("input",(()=>{u.textContent=c.value})),l.append(s,c,u),e.appendChild(l),c}function i(e,n,t,i){const o=e.createBuffer();function r(){e.bindBuffer(n,o)}function a(i){e.bufferData(n,i,t)}return o||console.warn("Failed to create BufferObject."),i&&(r(),a(i)),{buf:o,bind:r,deleteBuffer:function(){e.deleteBuffer(o)},initBuffer:a,set:function(t,i=0,o=0,r){e.bufferSubData(n,i,t,o,r)},unbind:function(){e.bindBuffer(n,null)}}}const o=new Map;function r(e,n){const t=function(e,n,t){function i(n,t){if(o.has(t))return o.get(t);const i=e.createShader(n);if(e.shaderSource(i,t),e.compileShader(i),!e.getShaderParameter(i,e.COMPILE_STATUS))throw new Error(e.getShaderInfoLog(i));return o.set(t,i),i}const r=e.createProgram(),a=i(e.VERTEX_SHADER,n),l=i(e.FRAGMENT_SHADER,t);if(e.attachShader(r,a),e.attachShader(r,l),e.linkProgram(r),!e.getProgramParameter(r,e.LINK_STATUS))throw new Error(e.getProgramInfoLog(r));return r}(e,"#version 300 es\nin vec2 a;void main(){gl_Position=vec4(a,0,1);}",n),r=function(e){const n=e.createVertexArray();return{bind:()=>e.bindVertexArray(n),unbind:()=>e.bindVertexArray(null),delete:()=>e.deleteVertexArray(n)}}(e);return e.useProgram(t),r.bind(),i(e,e.ARRAY_BUFFER,e.STATIC_DRAW,new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1])),function(e,n,t){for(let i=0;i<t.length;i++){const{name:o,size:r,type:a,normalized:l,stride:s,offset:c,divisor:u}=t[i],d=e.getAttribLocation(n,o);-1!==d?(e.enableVertexAttribArray(d),e.vertexAttribPointer(d,r,a||e.FLOAT,l||!1,s||0,c||0),u&&e.vertexAttribDivisor(d,u)):console.warn(`Attribute: '${o}' not found in program.`)}}(e,t,[{name:"a",size:2}]),r.unbind(),[t,function(){e.useProgram(t),r.bind(),e.drawArrays(e.TRIANGLES,0,6)}]}function a(e,n,t,i=0){const o=e.getUniformBlockIndex(n,t);function r(t=0){e.uniformBlockBinding(n,o,t)}return-1===o&&console.warn(`Uniform block ${t} not found in program.`),r(i),[e.getActiveUniformBlockParameter(n,o,e.UNIFORM_BLOCK_DATA_SIZE),r]}function l(e,n,t=0,o){const r=i(e,e.UNIFORM_BUFFER,e.STATIC_DRAW,new ArrayBuffer(n));return r.bindBuffer=function(n=0){e.bindBufferBase(e.UNIFORM_BUFFER,n,r.buf)},r.bindBuffer(t),o&&r.set(o),r}!function(){const t=document.getElementById("background"),[i,s,c]=e(t),[u,d]=r(i,"#version 300 es\n    precision highp float;\n    precision highp int;\n\n    // Rainbow Reciprocals by Kyle Simmons.\n\n    #define f gl_FragCoord.xy\n\n    uniform I { vec2 iMouse, iResolution; float iTime, iZoom; };\n\n    out vec4 o;\n\n    void main() {\n        // Normalized pixel coordinates\n        vec2 uv = iResolution * f - 1. - iMouse;\n\n        // 1.0 / distance from center\n        float dist = length(1./uv*iZoom);\n\n        // Generate wave pattern\n        float wave = iTime + dist;\n        \n        vec3 color = (0.5 + 0.5 * cos(2.0 * wave + vec3(0.0, 2.0, 4.0))) // RGB waves\n            * (1.0 -smoothstep(0.4, 0.6, abs(sin(wave * 9.0)))); // Edge smoothing\n\n        o = vec4(color, 1.0);\n    }");o.clear();const[m]=a(i,u,"I",0),f=l(i,m,0,new Float32Array([0,0,t.clientWidth,t.clientHeight,0,.1]));let v=2/t.clientHeight*window.devicePixelRatio,p=[],h=.1,g=0;n(t,{down:e=>{p.push(e),1===p.length&&t.setPointerCapture(e.pointerId)},move:e=>{let n=p.findIndex((n=>n.pointerId===e.pointerId));if(p[n]=e,1===p.length)f.set(new Float32Array([2*e.offsetX/t.clientWidth-1,2*-e.offsetY/t.clientHeight+1]),0);else if(2===p.length&&e.isPrimary){const[e,n]=p,t=Math.hypot(e.clientX-n.clientX,e.clientY-n.clientY);if(0===g)return g=t;h+=(t-g)*v,g=t,f.set(new Float32Array([h]),20)}},up:e=>{p=p.filter((n=>n.pointerId!==e.pointerId)),p.length<2&&(g=0),t.releasePointerCapture(e.pointerId)},wheel:e=>{e.preventDefault(),f.set(new Float32Array([h=Math.min(Math.max(h-2e-4*e.deltaY*Math.exp(h),.01),3)]),20)}}).bind(),window.addEventListener("resize",(()=>{const[e,n]=c();s(e,n),f.set(new Float32Array([2/e,2/n]),8)})),window.dispatchEvent(new Event("resize"));const w=document.getElementById("bg-fullscreen"),A=document.getElementById("bg-container");w.onclick=()=>{document.fullscreenElement?(document.exitFullscreen(),w.value="ðŸ”³"):(A.requestFullscreen(),w.value="ðŸ”²")},i.useProgram(u),i.clearColor(0,0,0,1),requestAnimationFrame((function e(n){i.clear(i.COLOR_BUFFER_BIT),f.set(new Float32Array([2e-5*n]),16),d(),requestAnimationFrame(e)}))}(),function(){const i=document.getElementById("mandelbrot-canvas"),[o,s,c]=e(i),[u,d]=r(o,"#version 300 es\n    precision highp float;\n    precision highp int;\n\n    #define f gl_FragCoord.xy\n\n    uniform I { uvec2 iResolution; vec2 iDelta; float iTime, iZoom; };\n    uniform U { uvec2 J; vec2 E; vec3 C; };\n\n    out vec4 o;\n\n    const float Y = 12.;\n\n    void main() {\n        vec2 r = vec2(iResolution);\n        float W = 1./(exp(iZoom)*r.y), F = E.y * W + E.x, K = float(J.y - J.x);\n        vec2 n = (2.*f - r)*W + iDelta, p = n, z = n*n;\n        int i = 0, H = int(K * pow(iZoom/Y, 2.)) + int(J.x);\n        while (i < H && z.x < F) { n = vec2(z.x - z.y + p.x, 2.*n.x*n.y + p.y); z = n*n; ++i; }\n        o = (i < H) ? vec4(.5 + .5 * cos(4. + (float(i) + 1. - log2(log2(dot(n, n)) / log2(F))) * .1 + C), 1) : vec4(0,0,0,1);\n    }");let m=window.devicePixelRatio;const f=document.getElementById("mandelbrot"),v=document.getElementById("panel"),p=t(v,"Resolution scale",m,m/8,m/2,2*m),h=t(v,"Zoom",0,1e-4,0,12),g=t(v,"Min Iterations",80,1,1,400),w=t(v,"Max Iterations",400,1,80,1e3),A=t(v,"Min Escape Radius",6,1e-4,2,10),b=t(v,"Max Escape Radius",5e3,1e-4,6,1e4),y=t(v,"Hue",.6,1e-4,0,1);f.ondblclick=e=>{e.preventDefault(),v.style.display="none"===v.style.display?"flex":"none"};const[E]=a(o,u,"I",0),F=l(o,E,0,new Uint32Array([i.clientWidth,i.clientHeight]));F.set(new Float32Array([-.74,.18,0,0]),8);let I=2/i.clientHeight*window.devicePixelRatio,x=[],R=0,B=-.74,M=.18,L=Math.exp(-R),P=0;function S(e){L=Math.exp(-e),F.bind(),F.set(new Float32Array([e]),20)}n(i,{down:e=>{x.push(e),1===x.length?i.setPointerCapture(e.pointerId):3===x.length&&(v.style.display="none"===v.style.display?"flex":"none")},move:e=>{let n=x.findIndex((n=>n.pointerId===e.pointerId));if(x[n]=e,1===x.length&&(B-=e.movementX*L*I,M+=e.movementY*L*I,F.bind(),F.set(new Float32Array([B,M]),8)),2===x.length&&e.isPrimary){const[e,n]=x,t=Math.hypot(e.clientX-n.clientX,e.clientY-n.clientY);if(0===P)return P=t;R+=(t-P)*I*2,P=t,h.value=R.toString(),S(R)}requestAnimationFrame(_)},up:e=>{x=x.filter((n=>n.pointerId!==e.pointerId)),x.length<2&&(P=0),i.releasePointerCapture(e.pointerId)},wheel:e=>{e.preventDefault(),S(R-=e.deltaY*I),h.value=R.toString(),requestAnimationFrame(_)}}).bind(),window.addEventListener("resize",(()=>{const[e,n]=c(m);s(e,n),I=2/i.clientHeight,F.bind(),F.set(new Uint32Array([e,n])),requestAnimationFrame(_)})),window.dispatchEvent(new Event("resize"));const[C]=a(o,u,"U",1),U=l(o,C,1,new Uint32Array([80,400]));U.set(new Float32Array([6,5e3,Math.cos(.6*Math.PI*2),Math.cos(.6*Math.PI*2+1),Math.cos(.6*Math.PI*2+2)]),8),p.oninput=()=>{m=p.valueAsNumber;const[e,n]=c(m);s(e,n),I=2/i.clientHeight,F.bind(),F.set(new Uint32Array([e,n])),requestAnimationFrame(_)},h.oninput=()=>{R=h.valueAsNumber,S(R),requestAnimationFrame(_)},g.oninput=()=>{w.min=g.value,U.bind(),U.set(new Uint32Array([g.valueAsNumber]),0),requestAnimationFrame(_)},w.oninput=()=>{g.max=w.value,U.bind(),U.set(new Uint32Array([w.valueAsNumber]),4),requestAnimationFrame(_)},A.oninput=()=>{b.min=A.value,U.bind(),U.set(new Float32Array([A.valueAsNumber]),8),requestAnimationFrame(_)},b.oninput=()=>{U.bind(),U.set(new Float32Array([b.valueAsNumber]),12),requestAnimationFrame(_)},y.oninput=()=>{const e=y.valueAsNumber*Math.PI*2;U.bind(),U.set(new Float32Array([Math.cos(e),Math.cos(e+1),Math.cos(e+2)]),16),requestAnimationFrame(_)};const T=document.getElementById("mb-fullscreen");function _(){o.clear(o.COLOR_BUFFER_BIT),d()}T.onclick=()=>{document.fullscreenElement?(document.exitFullscreen(),T.value="ðŸ”³"):(f.requestFullscreen(),T.value="ðŸ”²")},o.useProgram(u),o.clearColor(0,0,0,1),requestAnimationFrame(_)}()})()})();