(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var n=e.g.document;if(!t&&n&&(n.currentScript&&(t=n.currentScript.src),!t)){var a=n.getElementsByTagName("script");if(a.length)for(var i=a.length-1;i>-1&&(!t||!/^http(s?):/.test(t));)t=a[i--].src}if(!t)throw Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})(),(()=>{function e(e,t){const n=e.getContext("webgl2",t);if(!n)throw Error("WebGL2 is not supported");return[n,function(t=e.clientWidth,a=e.clientHeight,i=0,r=0){n.viewport(i,r,t,a)},e instanceof HTMLCanvasElement?function(t=window.devicePixelRatio,n=e.clientWidth,a=e.clientHeight){return[e.width=n*t,e.height=a*t]}:function(t=window.devicePixelRatio,n=e.width,a=e.height){return[e.width=n*t,e.height=a*t]}]}function t(e,t,n,a){const i=e.createBuffer();function r(){e.bindBuffer(t,i)}function o(a){e.bufferData(t,a,n)}return a&&(r(),o(a)),{buf:i,bind:r,initBuffer:o,set:function(n,a=0,i=0,r){e.bufferSubData(t,a,n,i,r)}}}function n(e,n){const a=function(e,t,n){function a(t,n){const a=e.createShader(t);if(e.shaderSource(a,n),e.compileShader(a),!e.getShaderParameter(a,e.COMPILE_STATUS))throw Error(e.getShaderInfoLog(a));return a}const i=e.createProgram(),r=a(e.VERTEX_SHADER,t),o=a(e.FRAGMENT_SHADER,n);if(e.attachShader(i,r),e.attachShader(i,o),e.linkProgram(i),!e.getProgramParameter(i,e.LINK_STATUS))throw Error(e.getProgramInfoLog(i));return i}(e,"#version 300 es\nin vec2 a;void main(){gl_Position=vec4(a,0,1);}",n),i=function(e){const t=e.createVertexArray();return{bind:()=>e.bindVertexArray(t),unbind:()=>e.bindVertexArray(null)}}(e);return e.useProgram(a),i.bind(),t(e,34962,35044,new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1])),function(e,t,n){for(let a=0;a<n.length;a++){const{name:i,size:r,type:o,normalized:c,stride:s,offset:l,divisor:u}=n[a],d=e.getAttribLocation(t,i);-1!==d&&(e.enableVertexAttribArray(d),e.vertexAttribPointer(d,r,o||e.FLOAT,c||!1,s||0,l||0),u&&e.vertexAttribDivisor(d,u))}}(e,a,[{name:"a",size:2}]),i.unbind(),[a,function(){e.useProgram(a),i.bind(),e.drawArrays(4,0,6)}]}function a(e,t,n,a=0){const i=e.getUniformBlockIndex(t,n);function r(n=0){e.uniformBlockBinding(t,i,n)}return r(a),[e.getActiveUniformBlockParameter(t,i,e.UNIFORM_BLOCK_DATA_SIZE),r]}function i(e,n,a=0,i){const r=t(e,e.UNIFORM_BUFFER,e.STATIC_DRAW,new ArrayBuffer(n));return r.bindBuffer=function(t=0){e.bindBufferBase(e.UNIFORM_BUFFER,t,r.buf)},r.bindBuffer(a),i&&r.set(i),r}var r=function(e,t,n,a){return new(n||(n=Promise))((function(i,r){function o(e){try{s(a.next(e))}catch(e){r(e)}}function c(e){try{s(a.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,c)}s((a=a.apply(e,t||[])).next())}))};function o(e,t,n){let a=0,i=0,r=0,o=Math.floor(6*e),c=6*e-o,s=n*(1-t),l=n*(1-c*t),u=n*(1-(1-c)*t);switch(o%6){case 0:a=n,i=u,r=s;break;case 1:a=l,i=n,r=s;break;case 2:a=s,i=n,r=u;break;case 3:a=s,i=l,r=n;break;case 4:a=u,i=s,r=n;break;case 5:a=n,i=s,r=l}return[a,i,r]}function c(e,t,n,a){let[i,r,c]=function(e,t,n){let a=Math.max(e,t,n),i=0,r=a-Math.min(e,t,n);switch(a){case e:i=(t-n)/r+(t<n?6:0);break;case t:i=(n-e)/r+2;break;case n:i=(e-t)/r+4}return i/=6,[i,r/a,a]}(e,t,n);return i=(i+a)%1,o(i,r,c)}function s(e,t){const n=e.id,a=Object.assign(document.createElement("div"),{className:"panel-control",id:n+"-container"}),i=Object.assign(document.createElement("span"),{className:"input-tooltip",id:n+"-tooltip",textContent:e.value});return e.addEventListener("input",(()=>{i.textContent=e.value})),a.append(Object.assign(document.createElement("label"),{className:"control-label",id:n+"-label",textContent:t,htmlFor:n}),e,i),a}var l=function(e,t,n,a){return new(n||(n=Promise))((function(i,r){function o(e){try{s(a.next(e))}catch(e){r(e)}}function c(e){try{s(a.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,c)}s((a=a.apply(e,t||[])).next())}))};!function(){l(this,void 0,void 0,(function*(){const t=document.createElement("canvas"),[r,o,l]=e(t,{alpha:!1,antialias:!1,depth:!1,powerPreference:"high-performance"});let u=yield fetch("./shaders/mandelbrot.fs").then((e=>e.text())),[d,m]=n(r,u),p=window.devicePixelRatio;const[f]=a(r,d,"U",0),h=i(r,f,0);function g(e){y.value=e.toString(),M=Math.exp(-e),h.set(new Float32Array([e]),44)}function v(e,t){h.set(new Float32Array([e,t]),16)}h.set(new Uint32Array([80,400])),h.set(new Float32Array([6,5e3,t.clientWidth*p,t.clientHeight*p,-.74,.18,3,4,5,0,.1]),8);const b=Object.assign(document.createElement("input"),{type:"range",id:"dpr",step:""+.25*p,min:""+.5*p,max:""+2*p,value:p.toString(),oninput:()=>{p=b.valueAsNumber;const[e,n]=l(p);o(e,n),I=2/t.clientHeight,v(e,n),requestAnimationFrame(k)}}),y=Object.assign(document.createElement("input"),{type:"range",id:"zoom",step:"1e-4",min:"0",max:"12",value:"0",oninput:()=>{P=y.valueAsNumber,g(P),requestAnimationFrame(k)}}),w=Object.assign(document.createElement("input"),{type:"range",id:"minIter",step:"1",min:"0",max:"400",value:"80",oninput:()=>{A.min=w.value.toString(),h.set(new Uint32Array([w.valueAsNumber]),0),requestAnimationFrame(k)}}),A=Object.assign(document.createElement("input"),{type:"range",id:"maxIter",step:"1",min:"80",max:"1000",value:"400",oninput:()=>{w.max=A.value.toString(),h.set(new Uint32Array([A.valueAsNumber]),4),requestAnimationFrame(k)}}),E=Object.assign(document.createElement("input"),{type:"range",id:"minEscape",step:"1e-4",min:"0",max:"12",value:"6",oninput:()=>{x.min=E.value.toString(),h.set(new Float32Array([E.valueAsNumber]),8),requestAnimationFrame(k)}}),x=Object.assign(document.createElement("input"),{type:"range",id:"maxEscape",step:"1e-4",min:"6",max:"1e4",value:"5e3",oninput:()=>{h.set(new Float32Array([x.valueAsNumber]),12),requestAnimationFrame(k)}}),F=Object.assign(document.createElement("input"),{type:"range",id:"hue",step:"1e-4",min:"0",max:"1",value:"0",oninput:()=>{h.set(new Float32Array([...c(3,4,5,F.valueAsNumber)]),32),requestAnimationFrame(k)}}),O=Object.assign(document.createElement("input"),{type:"range",id:"colorScale",step:"1e-4",min:"0",max:".5",value:".1",oninput:()=>{h.set(new Float32Array([O.valueAsNumber]),48),requestAnimationFrame(k)}});let I,j=[],P=0,S=-.74,N=.18,M=Math.exp(-P),B=0,C=e=>{j=j.filter((t=>t.pointerId!==e.pointerId)),j.length<2&&(B=0),t.releasePointerCapture(e.pointerId)};function k(){r.clear(r.COLOR_BUFFER_BIT),m()}Object.assign(t,{onpointerdown:e=>{j.push(e),1===j.length&&t.setPointerCapture(e.pointerId)},onpointermove:e=>{let t=j.findIndex((t=>t.pointerId===e.pointerId));if(j[t]=e,1===j.length&&(S-=e.movementX*M*I,N+=e.movementY*M*I,h.set(new Float32Array([S,N]),24)),2===j.length&&e.isPrimary){const[e,t]=j,n=Math.hypot(e.clientX-t.clientX,e.clientY-t.clientY);B&&g(P+=(n-B)*I*2),B=n}requestAnimationFrame(k)},onpointercancel:C,onpointerleave:C,onpointerout:C,onpointerup:C}),t.addEventListener("wheel",(e=>{e.preventDefault(),g(P-=e.deltaY*I),requestAnimationFrame(k)}),{passive:!1}),document.getElementById("canvas-content").append(function(e,t,n,...a){Object.assign(e,{className:"canvas-element",id:t});const i=Object.assign(document.createElement("div"),{className:"canvas-box",id:t+"-box"});i.append(e);const r=Object.assign(document.createElement("div"),{className:"canvas-container",id:t+"-container"});if(r.addEventListener("wheel",(e=>{e.preventDefault()}),{passive:!1}),a){const e=Object.assign(document.createElement("div"),{className:"canvas-panel",id:t+"-panel"}),n=Object.assign(document.createElement("button"),{className:"fullscreen-button",id:t+"-fullscreen",textContent:"Fullscreen",onclick:()=>{document.fullscreenElement?document.exitFullscreen():i.requestFullscreen()}});let r=0;const o=()=>{r=0};Object.assign(i,{ondblclick:t=>{t.preventDefault(),e.style.display="none"===e.style.display?"flex":"none"},onpointerdown:()=>{3==r++&&(e.style.display="none"===e.style.display?"flex":"none")},onpointercancel:o,onpointerup:o,onpointerout:o,onpointerleave:o}),e.append(n,...a),i.append(e)}return r.append(Object.assign(document.createElement("span"),{className:"canvas-caption",id:t+"-caption",textContent:n}),i),r}(t,"mandelbrot","Mandelbrot Set Explorer",s(b,"Resolution Scale"),s(y,"Zoom"),s(w,"Min Iterations"),s(A,"Max Iterations"),s(E,"Min Escape"),s(x,"Max Escape"),s(F,"Hue"),s(O,"Color Scale"))),window.addEventListener("resize",(()=>{const[e,n]=l(p);o(e,n),I=2/t.clientHeight,v(e,n),requestAnimationFrame(k)})),window.dispatchEvent(new Event("resize")),r.useProgram(d),r.clearColor(0,0,0,1),requestAnimationFrame(k)}))}(),function(){r(this,void 0,void 0,(function*(){const t=document.createElement("canvas"),[r,o,c]=e(t,{alpha:!1,antialias:!1,depth:!1,powerPreference:"high-performance"});let s=yield fetch("./shaders/background.fs").then((e=>e.text())),[l,u]=n(r,s);const[d]=a(r,l,"U",0),m=i(r,d,0,new Float32Array([0,0,0,0,0,1]));function p(e){v=Math.exp(-e),m.set(new Float32Array([e]),20)}let f,h=[],g=1,v=Math.exp(-g),b=0,y=e=>{h=h.filter((t=>t.pointerId!==e.pointerId)),h.length<2&&(b=0),t.releasePointerCapture(e.pointerId)};Object.assign(t,{className:"canvas-element fixed-canvas",id:"canvas-background",onpointerdown:e=>{h.push(e),1===h.length?t.setPointerCapture(e.pointerId):h.length},onpointermove:e=>{let n=h.findIndex((t=>t.pointerId===e.pointerId));if(h[n]=e,1===h.length)m.set(new Float32Array([2*e.offsetX/t.clientWidth-1,2*-e.offsetY/t.clientHeight+1]));else if(2===h.length&&e.isPrimary){const[e,t]=h,n=Math.hypot(e.clientX-t.clientX,e.clientY-t.clientY);0!==b&&p(g=Math.max(g+(n-b)*g*f*v*2,.5)),b=n}},onpointercancel:y,onpointerleave:y,onpointerout:y,onpointerup:y}),t.addEventListener("wheel",(e=>{e.preventDefault(),p(g=Math.max(g-e.deltaY*g*f*v*.5,.5))}),{passive:!1});let w=Object.assign(Object.assign({},{className:"someclass"}),{id:"someid"});const A=Object.assign(document.createElement("div"),Object.assign({ondblclick:()=>{E.style.display="none"===E.style.display?"flex":"none"}},w)),E=(Object.assign(document.createElement("div"),Object.assign({ondblclick:()=>{E.style.display="none"===E.style.display?"flex":"none"}},w)),Object.assign(document.createElement("button"),{className:"fullscreen-button",id:"background-fullscreen",textContent:"Fullscreen",onclick:()=>{document.fullscreenElement?document.exitFullscreen():A.requestFullscreen()}}));A.append(t,E),document.body.prepend(A),window.addEventListener("resize",(()=>{const[e,t]=c();o(e,t),function(e,t){f=2/t,m.set(new Float32Array([2/e,f]),8)}(e,t)})),window.dispatchEvent(new Event("resize")),r.useProgram(l),r.clearColor(0,0,0,1),requestAnimationFrame((function e(t){r.clear(r.COLOR_BUFFER_BIT),m.set(new Float32Array([5e-5*t]),16),u(),requestAnimationFrame(e)}))}))}()})(),e.p,e.p,e.p})();