(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var n=e.g.document;if(!t&&n&&(n.currentScript&&(t=n.currentScript.src),!t)){var i=n.getElementsByTagName("script");if(i.length)for(var r=i.length-1;r>-1&&(!t||!/^http(s?):/.test(t));)t=i[r--].src}if(!t)throw Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})(),(()=>{function e(e,t){const n=e.getContext("webgl2",t);if(!n)throw Error("WebGL2 is not supported");return[n,function(t=e.clientWidth,i=e.clientHeight,r=0,o=0){n.viewport(r,o,t,i)},e instanceof HTMLCanvasElement?function(t=window.devicePixelRatio,n=e.clientWidth,i=e.clientHeight){return[e.width=n*t,e.height=i*t]}:function(t=window.devicePixelRatio,n=e.width,i=e.height){return[e.width=n*t,e.height=i*t]}]}function t(e,t){return{bind:()=>{t.down&&e.addEventListener("pointerdown",t.down),t.move&&e.addEventListener("pointermove",t.move),t.up&&(e.addEventListener("pointerup",t.up),e.addEventListener("pointercancel",t.up),e.addEventListener("pointerout",t.up),e.addEventListener("pointerleave",t.up)),t.wheel&&e.addEventListener("wheel",t.wheel,{passive:!1})},unbind:()=>{t.down&&e.removeEventListener("pointerdown",t.down),t.move&&e.removeEventListener("pointermove",t.move),t.up&&(e.removeEventListener("pointerup",t.up),e.removeEventListener("pointercancel",t.up),e.removeEventListener("pointerout",t.up),e.removeEventListener("pointerleave",t.up)),t.wheel&&e.removeEventListener("wheel",t.wheel)}}}function n(e,t,n=0,i=1,r=0,o=1,a="control"){const l=Object.assign(document.createElement("div"),{className:a}),s=Object.assign(document.createElement("label"),{textContent:t}),c=Object.assign(document.createElement("input"),{type:"range",id:t,name:t,step:i.toString(),min:r.toString(),max:o.toString(),value:n.toString()}),u=Object.assign(document.createElement("span"),{className:"tooltip",id:t+"-tooltip",textContent:n.toString()});return s.setAttribute("for",t),c.addEventListener("input",(()=>{u.textContent=c.value})),l.append(s,c,u),e.appendChild(l),c}function i(e,t,n,i){const r=e.createBuffer();function o(){e.bindBuffer(t,r)}function a(i){e.bufferData(t,i,n)}return i&&(o(),a(i)),{buf:r,bind:o,deleteBuffer:function(){e.deleteBuffer(r)},initBuffer:a,set:function(n,i=0,r=0,o){e.bufferSubData(t,i,n,r,o)},unbind:function(){e.bindBuffer(t,null)}}}const r=new Map;function o(e,t){const n=function(e,t,n){function i(t,n){if(r.has(n))return r.get(n);const i=e.createShader(t);if(e.shaderSource(i,n),e.compileShader(i),!e.getShaderParameter(i,e.COMPILE_STATUS))throw Error(e.getShaderInfoLog(i));return r.set(n,i),i}const o=e.createProgram(),a=i(e.VERTEX_SHADER,t),l=i(e.FRAGMENT_SHADER,n);if(e.attachShader(o,a),e.attachShader(o,l),e.linkProgram(o),!e.getProgramParameter(o,e.LINK_STATUS))throw Error(e.getProgramInfoLog(o));return o}(e,"#version 300 es\nin vec2 a;void main(){gl_Position=vec4(a,0,1);}",t),o=function(e){const t=e.createVertexArray();return{bind:()=>e.bindVertexArray(t),unbind:()=>e.bindVertexArray(null),delete:()=>e.deleteVertexArray(t)}}(e);return e.useProgram(n),o.bind(),i(e,e.ARRAY_BUFFER,e.STATIC_DRAW,new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1])),function(e,t,n){for(let i=0;i<n.length;i++){const{name:r,size:o,type:a,normalized:l,stride:s,offset:c,divisor:u}=n[i],d=e.getAttribLocation(t,r);-1!==d&&(e.enableVertexAttribArray(d),e.vertexAttribPointer(d,o,a||e.FLOAT,l||!1,s||0,c||0),u&&e.vertexAttribDivisor(d,u))}}(e,n,[{name:"a",size:2}]),o.unbind(),[n,function(){e.useProgram(n),o.bind(),e.drawArrays(e.TRIANGLES,0,6)}]}function a(e,t,n,i=0){const r=e.getUniformBlockIndex(t,n);function o(n=0){e.uniformBlockBinding(t,r,n)}return o(i),[e.getActiveUniformBlockParameter(t,r,e.UNIFORM_BLOCK_DATA_SIZE),o]}function l(e,t,n=0,r){const o=i(e,e.UNIFORM_BUFFER,e.STATIC_DRAW,new ArrayBuffer(t));return o.bindBuffer=function(t=0){e.bindBufferBase(e.UNIFORM_BUFFER,t,o.buf)},o.bindBuffer(n),r&&o.set(r),o}!function(){const n=document.getElementById("background"),[i,s,c]=e(n),[u,d]=o(i,"#version 300 es\n#define F gl_FragCoord.xy\nprecision highp float;uniform I{vec2 M,R;float T,Z;};out vec4 o;void main(){vec2 f=F*R-1.0;float N=dot(M,M),A=radians(cos(T)*length(f)*90.)-M.x,B=sin(A),C=cos(A);f*=mat2(C,B,-B,C)*(2.+.5*cos(T)+M.y)/Z;float W=T+abs(f.x*f.y*4.)+sin(sin(T)*dot(f,f)*4.),v=sin(3.*W+9.*N);o=vec4((.5+.5*cos(W+N+vec3(0,2,4)))*smoothstep(1.,-1.,(abs(v)-.5)/fwidth(v)),1.);}");r.clear();const[m]=a(i,u,"I",0),f=l(i,m,0,new Float32Array([0,0,n.clientWidth,n.clientHeight,0,1])),p=document.getElementById("bg-fullscreen"),v=document.getElementById("bg-container"),h=document.getElementById("bg-fullscreen-container");p.onclick=()=>{document.fullscreenElement?(document.exitFullscreen(),p.value="ðŸ”³"):(v.requestFullscreen(),p.value="ðŸ”²")},n.ondblclick=e=>{e.preventDefault(),h.style.display="none"===h.style.display?"flex":"none"};let g=2/n.clientHeight*window.devicePixelRatio,w=[],A=1,y=0;t(n,{down:e=>{w.push(e),1===w.length&&n.setPointerCapture(e.pointerId),3===w.length&&(h.style.display="none"===h.style.display?"flex":"none")},move:e=>{let t=w.findIndex((t=>t.pointerId===e.pointerId));if(w[t]=e,1===w.length)f.set(new Float32Array([2*e.offsetX/n.clientWidth-1,2*-e.offsetY/n.clientHeight+1]),0);else if(2===w.length&&e.isPrimary){const[e,t]=w,n=Math.hypot(e.clientX-t.clientX,e.clientY-t.clientY);if(0===y)return y=n;f.set(new Float32Array([A=Math.max(A+(n-y)*A*g*4,.01)]),20),y=n}},up:e=>{w=w.filter((t=>t.pointerId!==e.pointerId)),w.length<2&&(y=0),n.releasePointerCapture(e.pointerId)},wheel:e=>{e.preventDefault(),f.set(new Float32Array([A=Math.max(A-e.deltaY*A*g,.01)]),20)}}).bind(),window.addEventListener("resize",(()=>{const[e,t]=c();s(e,t),g=2/t,f.set(new Float32Array([2/e,g]),8)})),window.dispatchEvent(new Event("resize")),i.useProgram(u),i.clearColor(0,0,0,1),requestAnimationFrame((function e(t){i.clear(i.COLOR_BUFFER_BIT),f.set(new Float32Array([5e-5*t]),16),d(),requestAnimationFrame(e)}))}(),function(){const i=document.getElementById("mandelbrot-canvas"),[r,s,c]=e(i),[u,d]=o(r,"#version 300 es\n    precision highp float;\n    precision highp int;\n\n    #define f gl_FragCoord.xy\n\n    uniform I { uvec2 iResolution; vec2 iDelta; float iTime, iZoom; };\n    uniform U { uvec2 J; vec2 E; vec3 C; };\n\n    out vec4 o;\n\n    const float Y = 12.;\n\n    void main() {\n        vec2 r = vec2(iResolution);\n        float W = 1./(exp(iZoom)*r.y), F = E.y * W + E.x, K = float(J.y - J.x);\n        vec2 n = (2.*f - r)*W + iDelta, p = n, z = n*n;\n        int i = 0, H = int(K * pow(iZoom/Y, 2.)) + int(J.x);\n        while (i < H && z.x < F) { n = vec2(z.x - z.y + p.x, 2.*n.x*n.y + p.y); z = n*n; ++i; }\n        o = (i < H) ? vec4(.5 + .5 * cos(4. + (float(i) + 1. - log2(log2(dot(n, n)) / log2(F))) * .1 + C), 1) : vec4(0,0,0,1);\n    }");let m=window.devicePixelRatio;const f=document.getElementById("mandelbrot"),p=document.getElementById("panel"),v=n(p,"Resolution scale",m,m/8,m/2,2*m),h=n(p,"Zoom",0,1e-4,0,12),g=n(p,"Min Iterations",80,1,1,400),w=n(p,"Max Iterations",400,1,80,1e3),A=n(p,"Min Escape Radius",6,1e-4,2,10),y=n(p,"Max Escape Radius",5e3,1e-4,6,1e4),b=n(p,"Hue",.6,1e-4,0,1);f.ondblclick=e=>{e.preventDefault(),p.style.display="none"===p.style.display?"flex":"none"};const[E]=a(r,u,"I",0),F=l(r,E,0,new Uint32Array([i.clientWidth,i.clientHeight]));F.set(new Float32Array([-.74,.18,0,0]),8);let x=2/i.clientHeight*window.devicePixelRatio,I=[],B=0,R=-.74,L=.18,S=Math.exp(-B),P=0;function M(e){S=Math.exp(-e),F.bind(),F.set(new Float32Array([e]),20)}t(i,{down:e=>{I.push(e),1===I.length&&i.setPointerCapture(e.pointerId),3===I.length&&(p.style.display="none"===p.style.display?"flex":"none")},move:e=>{let t=I.findIndex((t=>t.pointerId===e.pointerId));if(I[t]=e,1===I.length&&(R-=e.movementX*S*x,L+=e.movementY*S*x,F.bind(),F.set(new Float32Array([R,L]),8)),2===I.length&&e.isPrimary){const[e,t]=I,n=Math.hypot(e.clientX-t.clientX,e.clientY-t.clientY);if(0===P)return P=n;B+=(n-P)*x*2,P=n,h.value=B.toString(),M(B)}requestAnimationFrame(N)},up:e=>{I=I.filter((t=>t.pointerId!==e.pointerId)),I.length<2&&(P=0),i.releasePointerCapture(e.pointerId)},wheel:e=>{e.preventDefault(),M(B-=e.deltaY*x),h.value=B.toString(),requestAnimationFrame(N)}}).bind(),window.addEventListener("resize",(()=>{const[e,t]=c(m);s(e,t),x=2/i.clientHeight,F.bind(),F.set(new Uint32Array([e,t])),requestAnimationFrame(N)})),window.dispatchEvent(new Event("resize"));const[C]=a(r,u,"U",1),T=l(r,C,1,new Uint32Array([80,400]));T.set(new Float32Array([6,5e3,-.8090169943749475,.05749048755480921,.8711414803576415]),8),v.oninput=()=>{m=v.valueAsNumber;const[e,t]=c(m);s(e,t),x=2/i.clientHeight,F.bind(),F.set(new Uint32Array([e,t])),requestAnimationFrame(N)},h.oninput=()=>{B=h.valueAsNumber,M(B),requestAnimationFrame(N)},g.oninput=()=>{w.min=g.value,T.bind(),T.set(new Uint32Array([g.valueAsNumber]),0),requestAnimationFrame(N)},w.oninput=()=>{g.max=w.value,T.bind(),T.set(new Uint32Array([w.valueAsNumber]),4),requestAnimationFrame(N)},A.oninput=()=>{y.min=A.value,T.bind(),T.set(new Float32Array([A.valueAsNumber]),8),requestAnimationFrame(N)},y.oninput=()=>{T.bind(),T.set(new Float32Array([y.valueAsNumber]),12),requestAnimationFrame(N)},b.oninput=()=>{const e=b.valueAsNumber*Math.PI*2;T.bind(),T.set(new Float32Array([Math.cos(e),Math.cos(e+1),Math.cos(e+2)]),16),requestAnimationFrame(N)};const U=document.getElementById("mb-fullscreen");function N(){r.clear(r.COLOR_BUFFER_BIT),d()}U.onclick=()=>{document.fullscreenElement?(document.exitFullscreen(),U.value="ðŸ”³"):(f.requestFullscreen(),U.value="ðŸ”²")},r.useProgram(u),r.clearColor(0,0,0,1),requestAnimationFrame(N)}()})(),e.p})();