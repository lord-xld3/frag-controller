(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var n=e.g.document;if(!t&&n&&(n.currentScript&&(t=n.currentScript.src),!t)){var a=n.getElementsByTagName("script");if(a.length)for(var r=a.length-1;r>-1&&(!t||!/^http(s?):/.test(t));)t=a[r--].src}if(!t)throw Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})(),(()=>{function e(e,t){const n=e.getContext("webgl2",t);if(!n)throw Error("WebGL2 is not supported");return[n,function(t=e.clientWidth,a=e.clientHeight,r=0,o=0){n.viewport(r,o,t,a)},e instanceof HTMLCanvasElement?function(t=window.devicePixelRatio,n=e.clientWidth,a=e.clientHeight){return[e.width=n*t,e.height=a*t]}:function(t=window.devicePixelRatio,n=e.width,a=e.height){return[e.width=n*t,e.height=a*t]}]}function t(e,t,n,a){const r=e.createBuffer(),o=()=>e.bindBuffer(n,r);return o(),e.bufferData(n,t,a),Object.assign(((t,a=0)=>e.bufferSubData(n,a,t)),{bindBuffer:o,buf:r})}function n(e,n){let a=function(e,t,n){function a(t,n){const a=e.createShader(t);if(e.shaderSource(a,n),e.compileShader(a),!e.getShaderParameter(a,e.COMPILE_STATUS))throw Error(e.getShaderInfoLog(a));return a}const r=e.createProgram(),o=a(e.VERTEX_SHADER,t),i=a(e.FRAGMENT_SHADER,n);if(e.attachShader(r,o),e.attachShader(r,i),e.linkProgram(r),!e.getProgramParameter(r,e.LINK_STATUS))throw Error(e.getProgramInfoLog(r));return e.deleteShader(o),e.deleteShader(i),r}(e,"#version 300 es\nin vec2 a;void main(){gl_Position=vec4(a,0,1);}",n),r=function(e){const t=e.createVertexArray();return Object.assign((()=>e.bindVertexArray(t)),{unbind:()=>e.bindVertexArray(null)})}(e);return e.useProgram(a),r(),t(e,48,34962,35044)(new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1])),function(e,t,n){let a=0,r=n.length;for(;a<r;a++){const{name:r,size:o,type:i,normalized:c,stride:s,offset:l,divisor:d}=n[a],u=e.getAttribLocation(t,r);-1!==u&&(e.enableVertexAttribArray(u),e.vertexAttribPointer(u,o,i||5126,c||!1,s||0,l||0),d&&e.vertexAttribDivisor(u,d))}}(e,a,[{name:"a",size:2}]),Object.assign((()=>{e.useProgram(a),r(),e.drawArrays(4,0,6)}),{program:a})}function a(e,t,n){const a=e.getUniformBlockIndex(t,n);return Object.assign(((n=0)=>e.uniformBlockBinding(t,a,n)),{size:e.getActiveUniformBlockParameter(t,a,e.UNIFORM_BLOCK_DATA_SIZE)})}function r(e,n){const a=t(e,n,e.UNIFORM_BUFFER,e.STATIC_DRAW);return Object.assign(a,{bufferIndex:(t=0)=>e.bindBufferBase(e.UNIFORM_BUFFER,t,a.buf)})}function o(e,t,n){let a=0,r=0,o=0,i=Math.floor(6*e),c=6*e-i,s=n*(1-t),l=n*(1-c*t),d=n*(1-(1-c)*t);switch(i%6){case 0:a=n,r=d,o=s;break;case 1:a=l,r=n,o=s;break;case 2:a=s,r=n,o=d;break;case 3:a=s,r=l,o=n;break;case 4:a=d,r=s,o=n;break;case 5:a=n,r=s,o=l}return[a,r,o]}function i(e,t,n,a){let[r,i,c]=function(e,t,n){let a=Math.max(e,t,n),r=0,o=a-Math.min(e,t,n);switch(a){case e:r=(t-n)/o+(t<n?6:0);break;case t:r=(n-e)/o+2;break;case n:r=(e-t)/o+4}return r/=6,[r,o/a,a]}(e,t,n);return r=(r+a)%1,o(r,i,c)}function c(e,t){const n=e.id,a=Object.assign(document.createElement("div"),{className:"panel-control",id:n+"-container"}),r=Object.assign(document.createElement("span"),{className:"input-tooltip",id:n+"-tooltip",textContent:e.value});return e.addEventListener("input",(()=>{r.textContent=e.value})),a.append(Object.assign(document.createElement("label"),{className:"control-label",id:n+"-label",textContent:t,htmlFor:n}),e,r),a}function s(e,t,n,a,...r){Object.assign(e,{className:"canvas-element",id:t});const o=Object.assign(document.createElement("div"),{className:"canvas-box",id:t+"-box"});o.append(e);const i=Object.assign(document.createElement("div"),{className:"canvas-container",id:t+"-container"});if(i.addEventListener("wheel",(e=>{e.preventDefault()}),{passive:!1}),Object.assign(a,{className:"panel-header",id:t+"-header"}),r){const e=Object.assign(document.createElement("div"),{className:"canvas-panel",id:t+"-panel"}),n=Object.assign(document.createElement("button"),{className:"fullscreen-button",id:t+"-fullscreen",textContent:"ðŸ”³",onclick:()=>{document.fullscreenElement?(document.exitFullscreen(),e.style.height="100%"):(o.requestFullscreen(),e.style.height="100%")}});a.prepend(n);let i=0;const c=()=>{i=0};Object.assign(o,{ondblclick:t=>{t.preventDefault(),e.style.display="none"===e.style.display?"flex":"none"},onpointerdown:()=>{3==++i&&(e.style.display="none"===e.style.display?"flex":"none")},onpointercancel:c,onpointerup:c,onpointerout:c,onpointerleave:c}),e.append(a,...r),o.append(e)}return i.append(Object.assign(document.createElement("span"),{className:"canvas-caption",id:t+"-caption",textContent:n}),o),i}!function(){const t=document.createElement("canvas"),[o,l,d]=e(t,{alpha:!1,antialias:!1,depth:!1,powerPreference:"high-performance"}),u=n(o,document.getElementById("mandelbrot-shader").textContent);let p=window.devicePixelRatio;const m=a(o,u.program,"z");m(0);const f=r(o,m.size);f.bufferIndex(0);let g,h=[],b=1,v=-.74,y=.18,w=Math.exp(-b),E=0;function x(e){I.value=e.toString(),w=Math.exp(-e),f(new Float32Array([e]),20)}function A(e,n){g=2/t.clientHeight,f(new Float32Array([e,n]),8)}f(new Float32Array([t.clientWidth*p,t.clientHeight*p,0,b]),8),f(new Uint32Array([80,400]),24),f(new Float32Array([3,900,-.74,.18,3,4,5,1]),32);const F=Object.assign(document.createElement("input"),{type:"range",id:"dpr",step:""+.25*p,min:""+.5*p,max:""+2*p,value:p.toString(),oninput:()=>{p=F.valueAsNumber;const[e,t]=d(p);l(e,t),A(e,t)}}),I=Object.assign(document.createElement("input"),{type:"range",id:"zoom",step:"1e-4",min:"0",max:"12",value:b.toString(),oninput:()=>{b=I.valueAsNumber,x(b)}}),O=Object.assign(document.createElement("input"),{type:"range",id:"minIter",step:"1",min:"0",max:"400",value:"80",oninput:()=>{j.min=O.value.toString(),f(new Uint32Array([O.valueAsNumber]),24)}}),j=Object.assign(document.createElement("input"),{type:"range",id:"maxIter",step:"1",min:"80",max:"1000",value:"300",oninput:()=>{O.max=j.value.toString(),f(new Uint32Array([j.valueAsNumber]),28)}}),N=Object.assign(document.createElement("input"),{type:"range",id:"minEscape",step:"1e-4",min:"0",max:"12",value:"6",oninput:()=>{C.min=N.value.toString(),f(new Float32Array([N.valueAsNumber]),32)}}),C=Object.assign(document.createElement("input"),{type:"range",id:"maxEscape",step:"1e-4",min:"6",max:"1e4",value:"5e3",oninput:()=>{f(new Float32Array([C.valueAsNumber]),36)}}),S=Object.assign(document.createElement("input"),{type:"range",id:"hue",step:"1e-4",min:"0",max:"1",value:"0",oninput:()=>{f(new Float32Array([...i(3,4,5,S.valueAsNumber)]),48)}}),P=Object.assign(document.createElement("input"),{type:"range",id:"colorScale",step:"1e-4",min:"0",max:"2",value:"1",oninput:()=>{f(new Float32Array([P.valueAsNumber]),60)}});let k=e=>{h=h.filter((t=>t.pointerId!==e.pointerId)),h.length<2&&(E=0),t.releasePointerCapture(e.pointerId)};Object.assign(t,{onpointerdown:e=>{h.push(e),1===h.length&&t.setPointerCapture(e.pointerId)},onpointermove:e=>{if(h[h.findIndex((t=>t.pointerId===e.pointerId))]=e,1===h.length)v-=e.movementX*w*g,y+=e.movementY*w*g,f(new Float32Array([v,y]),40);else if(2===h.length&&e.isPrimary){const[e,t]=h,n=Math.hypot(e.offsetX-t.offsetX,e.offsetY-t.offsetY);E&&x(b+=(n-E)*g*2),E=n}},onpointercancel:k,onpointerleave:k,onpointerout:k,onpointerup:k}),t.addEventListener("wheel",(e=>{e.preventDefault(),x(b-=e.deltaY*g)}),{passive:!1}),document.getElementById("canvas-content").append(s(t,"mandelbrot","Mandelbrot Set Explorer",document.createElement("div"),c(F,"Resolution"),c(I,"Zoom"),c(O,"Min Iterations"),c(j,"Max Iterations"),c(N,"Min Escape"),c(C,"Max Escape"),c(S,"Hue"),c(P,"Color Scale"))),window.addEventListener("resize",(()=>{const[e,t]=d(p);l(e,t),A(e,t)})),window.dispatchEvent(new Event("resize")),o.clearColor(0,0,0,1),requestAnimationFrame((function e(t){o.clear(o.COLOR_BUFFER_BIT),f(new Float32Array([t]),16),u(),requestAnimationFrame(e)}))}(),function(){const t=document.createElement("canvas"),[o,i,c]=e(t,{alpha:!1,antialias:!1,depth:!1,powerPreference:"high-performance"}),s=n(o,document.getElementById("background-shader").textContent),l=a(o,s.program,"z");l(0);const d=r(o,l.size);d.bufferIndex(0),d(new Float32Array([0,0,0,0,0,1]));let u,p,m=[],f=1,g=0;const h=e=>{m=m.filter((t=>t.pointerId!==e.pointerId)),t.releasePointerCapture(e.pointerId),m.length<2&&(g=0)};Object.assign(t,{className:"canvas-element fixed-canvas",id:"canvas-background",onpointercancel:h,onpointerleave:h,onpointerout:h,onpointerup:h,onpointerdown:e=>{m.push(e),1===m.length?t.setPointerCapture(e.pointerId):3===m.length&&(v.style.display="none"===v.style.display?"flex":"none")},onpointermove:e=>{if(m[m.findIndex((t=>t.pointerId===e.pointerId))]=e,1===m.length)d(new Float32Array([e.offsetX*u-1,-e.offsetY*p+1]));else if(2===m.length&&e.isPrimary){const[e,t]=m,n=Math.hypot(e.offsetX-t.offsetX,e.offsetY-t.offsetY);g&&(f=Math.max(f+(n-g)*p*2,.1),d(new Float32Array([1/f]),20)),g=n}}}),t.addEventListener("wheel",(e=>{e.preventDefault(),f=Math.max(f-e.deltaY*f*p*.5,.1),d(new Float32Array([1/f]),20)}),{passive:!1});const b=Object.assign(document.createElement("div"),{className:"canvas-box",id:"background-box",ondblclick:()=>{v.style.display="none"===v.style.display?"flex":"none"}}),v=Object.assign(document.createElement("button"),{className:"fullscreen-button",id:"background-fullscreen",textContent:"ðŸ”³",onclick:()=>{document.fullscreenElement?document.exitFullscreen():b.requestFullscreen()}});b.append(t,v),document.body.prepend(b),window.addEventListener("resize",(()=>{const[e,n]=c();i(e,n),u=2/t.clientWidth,p=2/t.clientHeight,d(new Float32Array([2/e,2/n]),8)})),window.dispatchEvent(new Event("resize")),o.clearColor(0,0,0,1),requestAnimationFrame((function e(t){o.clear(o.COLOR_BUFFER_BIT),d(new Float32Array([1e-4*t]),16),s(),requestAnimationFrame(e)}))}(),function(){const t=document.createElement("canvas"),[o,i,c]=e(t,{alpha:!1,antialias:!1,depth:!1,powerPreference:"high-performance"}),l=document.getElementById("reciprocal-shader");let d=n(o,l.textContent);const u=a(o,d.program,"z");u(0);const p=r(o,u.size);p.bufferIndex(0),p(new Float32Array([0,0,0,0,0,1]));let m,f,g=[],h=1,b=0;const v=e=>{g=g.filter((t=>t.pointerId!==e.pointerId)),t.releasePointerCapture(e.pointerId),g.length<2&&(b=0)};Object.assign(t,{onpointercancel:v,onpointerleave:v,onpointerout:v,onpointerup:v,onpointerdown:e=>{g.push(e),1===g.length&&t.setPointerCapture(e.pointerId)},onpointermove:e=>{if(g[g.findIndex((t=>t.pointerId===e.pointerId))]=e,1===g.length)p(new Float32Array([e.offsetX*m-1,-e.offsetY*f+1]),0);else if(2===g.length&&e.isPrimary){const[e,t]=g,n=Math.hypot(e.offsetX-t.offsetX,e.offsetY-t.offsetY);b&&(h=Math.max(h+(n-b)*f*2,.1),p(new Float32Array([1/h]),20)),b=n}}}),t.addEventListener("wheel",(e=>{e.preventDefault(),h=Math.max(h-e.deltaY*h*f*.5,.1),p(new Float32Array([1/h]),20)}),{passive:!1});const y=Object.assign(document.createElement("textarea"),{id:"reciprocal-source",value:l.textContent,spellcheck:!1}),w=Object.assign(document.createElement("textarea"),{className:"console-output",id:"reciprocal-output",spellcheck:!1,disabled:!0});w.style.display="none";const E=Object.assign(document.createElement("button"),{className:"console-button",id:"reciprocal-console",textContent:"ðŸ’¬",onclick:()=>{w.style.display="none"===w.style.display?"block":"none"}}),x=Object.assign(document.createElement("button"),{className:"compile-button",id:"compile-reciprocal",textContent:"ðŸ’¾",onclick:()=>{try{d=n(o,y.value),w.value=""}catch(e){w.value=e,w.style.display="block"}}}),A=document.createElement("div");A.append(x,E);const F=Object.assign(document.createElement("div"),{className:"contentbox",id:"reciprocal-contentbox"});F.append(y,w),document.getElementById("canvas-content").append(s(t,"reciprocal","Weird reciprocals",A,F)),window.addEventListener("resize",(()=>{const[e,n]=c();i(e,n),m=2/t.clientWidth,f=2/t.clientHeight,p(new Float32Array([2/e,2/n]),8)})),window.dispatchEvent(new Event("resize")),o.clearColor(0,0,0,1),requestAnimationFrame((function e(t){o.clear(o.COLOR_BUFFER_BIT),p(new Float32Array([1e-4*t]),16),d(),requestAnimationFrame(e)}))}()})(),e.p,e.p,e.p})();