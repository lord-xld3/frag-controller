(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var n;e.g.importScripts&&(n=e.g.location+"");var t=e.g.document;if(!n&&t&&(t.currentScript&&(n=t.currentScript.src),!n)){var i=t.getElementsByTagName("script");if(i.length)for(var r=i.length-1;r>-1&&(!n||!/^http(s?):/.test(n));)n=i[r--].src}if(!n)throw Error("Automatic publicPath is not supported in this browser");n=n.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=n})(),(()=>{function e(e,n){const t=e.getContext("webgl2",n);if(!t)throw Error("WebGL2 is not supported");return[t,function(n=e.clientWidth,i=e.clientHeight,r=0,o=0){t.viewport(r,o,n,i)},e instanceof HTMLCanvasElement?function(n=window.devicePixelRatio,t=e.clientWidth,i=e.clientHeight){return[e.width=t*n,e.height=i*n]}:function(n=window.devicePixelRatio,t=e.width,i=e.height){return[e.width=t*n,e.height=i*n]}]}function n(e,n){return{bind:()=>{n.down&&e.addEventListener("pointerdown",n.down),n.move&&e.addEventListener("pointermove",n.move),n.up&&(e.addEventListener("pointerup",n.up),e.addEventListener("pointercancel",n.up),e.addEventListener("pointerout",n.up),e.addEventListener("pointerleave",n.up)),n.wheel&&e.addEventListener("wheel",n.wheel,{passive:!1})},unbind:()=>{n.down&&e.removeEventListener("pointerdown",n.down),n.move&&e.removeEventListener("pointermove",n.move),n.up&&(e.removeEventListener("pointerup",n.up),e.removeEventListener("pointercancel",n.up),e.removeEventListener("pointerout",n.up),e.removeEventListener("pointerleave",n.up)),n.wheel&&e.removeEventListener("wheel",n.wheel)}}}function t(e,n,t=0,i=1,r=0,o=1,a="control"){const l=Object.assign(document.createElement("div"),{className:a}),s=Object.assign(document.createElement("label"),{textContent:n}),c=Object.assign(document.createElement("input"),{type:"range",id:n,name:n,step:i.toString(),min:r.toString(),max:o.toString(),value:t.toString()}),u=Object.assign(document.createElement("span"),{className:"tooltip",id:n+"-tooltip",textContent:t.toString()});return s.setAttribute("for",n),c.addEventListener("input",(()=>{u.textContent=c.value})),l.append(s,c,u),e.appendChild(l),c}function i(e,n,t,i){const r=e.createBuffer();function o(){e.bindBuffer(n,r)}function a(i){e.bufferData(n,i,t)}return i&&(o(),a(i)),{buf:r,bind:o,deleteBuffer:function(){e.deleteBuffer(r)},initBuffer:a,set:function(t,i=0,r=0,o){e.bufferSubData(n,i,t,r,o)},unbind:function(){e.bindBuffer(n,null)}}}const r=new Map;function o(e,n){const t=function(e,n,t){function i(n,t){if(r.has(t))return r.get(t);const i=e.createShader(n);if(e.shaderSource(i,t),e.compileShader(i),!e.getShaderParameter(i,e.COMPILE_STATUS))throw Error(e.getShaderInfoLog(i));return r.set(t,i),i}const o=e.createProgram(),a=i(e.VERTEX_SHADER,n),l=i(e.FRAGMENT_SHADER,t);if(e.attachShader(o,a),e.attachShader(o,l),e.linkProgram(o),!e.getProgramParameter(o,e.LINK_STATUS))throw Error(e.getProgramInfoLog(o));return o}(e,"#version 300 es\nin vec2 a;void main(){gl_Position=vec4(a,0,1);}",n),o=function(e){const n=e.createVertexArray();return{bind:()=>e.bindVertexArray(n),unbind:()=>e.bindVertexArray(null),delete:()=>e.deleteVertexArray(n)}}(e);return e.useProgram(t),o.bind(),i(e,e.ARRAY_BUFFER,e.STATIC_DRAW,new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1])),function(e,n,t){for(let i=0;i<t.length;i++){const{name:r,size:o,type:a,normalized:l,stride:s,offset:c,divisor:u}=t[i],d=e.getAttribLocation(n,r);-1!==d&&(e.enableVertexAttribArray(d),e.vertexAttribPointer(d,o,a||e.FLOAT,l||!1,s||0,c||0),u&&e.vertexAttribDivisor(d,u))}}(e,t,[{name:"a",size:2}]),o.unbind(),[t,function(){e.useProgram(t),o.bind(),e.drawArrays(e.TRIANGLES,0,6)}]}function a(e,n,t,i=0){const r=e.getUniformBlockIndex(n,t);function o(t=0){e.uniformBlockBinding(n,r,t)}return o(i),[e.getActiveUniformBlockParameter(n,r,e.UNIFORM_BLOCK_DATA_SIZE),o]}function l(e,n,t=0,r){const o=i(e,e.UNIFORM_BUFFER,e.STATIC_DRAW,new ArrayBuffer(n));return o.bindBuffer=function(n=0){e.bindBufferBase(e.UNIFORM_BUFFER,n,o.buf)},o.bindBuffer(t),r&&o.set(r),o}!function(){const t=document.getElementById("background"),[i,s,c]=e(t),[u,d]=o(i,"#version 300 es\n    precision highp float;\n    precision highp int;\n\n    // Rainbow Folding by Kyle Simmons.\n    // https://www.shadertoy.com/view/lXG3zd\n\n    #define F gl_FragCoord.xy\n\n    uniform I { vec2 M, R; float T, Z; };\n\n    out vec4 o;\n\n    void main() {\n        vec2 f = R * F - 1. - M;\n        float W = T + abs(f.x*f.y*4./Z) + sin(sin(T)*dot(f,f)*4.),\n            v = sin(W*9.);\n        o = vec4(\n            (.5+.5*cos(W + vec3(0,2,4)))*(smoothstep(1.,-1.,(abs(v)-.5)/fwidth(v))),\n            1.\n        );\n    }");r.clear();const[m]=a(i,u,"I",0),f=l(i,m,0,new Float32Array([0,0,t.clientWidth,t.clientHeight,0,1])),p=document.getElementById("bg-fullscreen"),v=document.getElementById("bg-container"),h=document.getElementById("bg-fullscreen-container");p.onclick=()=>{document.fullscreenElement?(document.exitFullscreen(),p.value="ðŸ”³"):(v.requestFullscreen(),p.value="ðŸ”²")},t.ondblclick=e=>{e.preventDefault(),h.style.display="none"===h.style.display?"block":"none"};let g=2/t.clientHeight*window.devicePixelRatio,w=[],b=1,y=0;n(t,{down:e=>{w.push(e),1===w.length&&t.setPointerCapture(e.pointerId),3===w.length&&(h.style.display="none"===h.style.display?"block":"none")},move:e=>{let n=w.findIndex((n=>n.pointerId===e.pointerId));if(w[n]=e,1===w.length)f.set(new Float32Array([2*e.offsetX/t.clientWidth-1,2*-e.offsetY/t.clientHeight+1]),0);else if(2===w.length&&e.isPrimary){const[e,n]=w,t=Math.hypot(e.clientX-n.clientX,e.clientY-n.clientY);if(0===y)return y=t;f.set(new Float32Array([b=Math.max(b+(t-y)*b*g*4,.01)]),20),y=t}},up:e=>{w=w.filter((n=>n.pointerId!==e.pointerId)),w.length<2&&(y=0),t.releasePointerCapture(e.pointerId)},wheel:e=>{e.preventDefault(),f.set(new Float32Array([b=Math.max(b-e.deltaY*b*g,.01)]),20)}}).bind(),window.addEventListener("resize",(()=>{const[e,n]=c(2*window.devicePixelRatio);s(e,n),g=2/n,f.set(new Float32Array([2/e,g]),8)})),window.dispatchEvent(new Event("resize")),i.useProgram(u),i.clearColor(0,0,0,1),requestAnimationFrame((function e(n){i.clear(i.COLOR_BUFFER_BIT),f.set(new Float32Array([1e-4*n]),16),d(),requestAnimationFrame(e)}))}(),function(){const i=document.getElementById("mandelbrot-canvas"),[r,s,c]=e(i),[u,d]=o(r,"#version 300 es\n    precision highp float;\n    precision highp int;\n\n    #define f gl_FragCoord.xy\n\n    uniform I { uvec2 iResolution; vec2 iDelta; float iTime, iZoom; };\n    uniform U { uvec2 J; vec2 E; vec3 C; };\n\n    out vec4 o;\n\n    const float Y = 12.;\n\n    void main() {\n        vec2 r = vec2(iResolution);\n        float W = 1./(exp(iZoom)*r.y), F = E.y * W + E.x, K = float(J.y - J.x);\n        vec2 n = (2.*f - r)*W + iDelta, p = n, z = n*n;\n        int i = 0, H = int(K * pow(iZoom/Y, 2.)) + int(J.x);\n        while (i < H && z.x < F) { n = vec2(z.x - z.y + p.x, 2.*n.x*n.y + p.y); z = n*n; ++i; }\n        o = (i < H) ? vec4(.5 + .5 * cos(4. + (float(i) + 1. - log2(log2(dot(n, n)) / log2(F))) * .1 + C), 1) : vec4(0,0,0,1);\n    }");let m=window.devicePixelRatio;const f=document.getElementById("mandelbrot"),p=document.getElementById("panel"),v=t(p,"Resolution scale",m,m/8,m/2,2*m),h=t(p,"Zoom",0,1e-4,0,12),g=t(p,"Min Iterations",80,1,1,400),w=t(p,"Max Iterations",400,1,80,1e3),b=t(p,"Min Escape Radius",6,1e-4,2,10),y=t(p,"Max Escape Radius",5e3,1e-4,6,1e4),A=t(p,"Hue",.6,1e-4,0,1);f.ondblclick=e=>{e.preventDefault(),p.style.display="none"===p.style.display?"flex":"none"};const[E]=a(r,u,"I",0),F=l(r,E,0,new Uint32Array([i.clientWidth,i.clientHeight]));F.set(new Float32Array([-.74,.18,0,0]),8);let x=2/i.clientHeight*window.devicePixelRatio,I=[],R=0,B=-.74,L=.18,S=Math.exp(-R),P=0;function M(e){S=Math.exp(-e),F.bind(),F.set(new Float32Array([e]),20)}n(i,{down:e=>{I.push(e),1===I.length&&i.setPointerCapture(e.pointerId),3===I.length&&(p.style.display="none"===p.style.display?"flex":"none")},move:e=>{let n=I.findIndex((n=>n.pointerId===e.pointerId));if(I[n]=e,1===I.length&&(B-=e.movementX*S*x,L+=e.movementY*S*x,F.bind(),F.set(new Float32Array([B,L]),8)),2===I.length&&e.isPrimary){const[e,n]=I,t=Math.hypot(e.clientX-n.clientX,e.clientY-n.clientY);if(0===P)return P=t;R+=(t-P)*x*2,P=t,h.value=R.toString(),M(R)}requestAnimationFrame(_)},up:e=>{I=I.filter((n=>n.pointerId!==e.pointerId)),I.length<2&&(P=0),i.releasePointerCapture(e.pointerId)},wheel:e=>{e.preventDefault(),M(R-=e.deltaY*x),h.value=R.toString(),requestAnimationFrame(_)}}).bind(),window.addEventListener("resize",(()=>{const[e,n]=c(m);s(e,n),x=2/i.clientHeight,F.bind(),F.set(new Uint32Array([e,n])),requestAnimationFrame(_)})),window.dispatchEvent(new Event("resize"));const[T]=a(r,u,"U",1),C=l(r,T,1,new Uint32Array([80,400]));C.set(new Float32Array([6,5e3,-.8090169943749475,.05749048755480921,.8711414803576415]),8),v.oninput=()=>{m=v.valueAsNumber;const[e,n]=c(m);s(e,n),x=2/i.clientHeight,F.bind(),F.set(new Uint32Array([e,n])),requestAnimationFrame(_)},h.oninput=()=>{R=h.valueAsNumber,M(R),requestAnimationFrame(_)},g.oninput=()=>{w.min=g.value,C.bind(),C.set(new Uint32Array([g.valueAsNumber]),0),requestAnimationFrame(_)},w.oninput=()=>{g.max=w.value,C.bind(),C.set(new Uint32Array([w.valueAsNumber]),4),requestAnimationFrame(_)},b.oninput=()=>{y.min=b.value,C.bind(),C.set(new Float32Array([b.valueAsNumber]),8),requestAnimationFrame(_)},y.oninput=()=>{C.bind(),C.set(new Float32Array([y.valueAsNumber]),12),requestAnimationFrame(_)},A.oninput=()=>{const e=A.valueAsNumber*Math.PI*2;C.bind(),C.set(new Float32Array([Math.cos(e),Math.cos(e+1),Math.cos(e+2)]),16),requestAnimationFrame(_)};const U=document.getElementById("mb-fullscreen");function _(){r.clear(r.COLOR_BUFFER_BIT),d()}U.onclick=()=>{document.fullscreenElement?(document.exitFullscreen(),U.value="ðŸ”³"):(f.requestFullscreen(),U.value="ðŸ”²")},r.useProgram(u),r.clearColor(0,0,0,1),requestAnimationFrame(_)}()})(),e.p})();