(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var n=e.g.document;if(!t&&n&&(n.currentScript&&(t=n.currentScript.src),!t)){var r=n.getElementsByTagName("script");if(r.length)for(var i=r.length-1;i>-1&&(!t||!/^http(s?):/.test(t));)t=r[i--].src}if(!t)throw Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})(),(()=>{function e(e,t){const n=e.getContext("webgl2",t);if(!n)throw Error("WebGL2 is not supported");return[n,function(t=e.clientWidth,r=e.clientHeight,i=0,o=0){n.viewport(i,o,t,r)},e instanceof HTMLCanvasElement?function(t=window.devicePixelRatio,n=e.clientWidth,r=e.clientHeight){return[e.width=n*t,e.height=r*t]}:function(t=window.devicePixelRatio,n=e.width,r=e.height){return[e.width=n*t,e.height=r*t]}]}function t(e,t){return{bind:()=>{t.down&&e.addEventListener("pointerdown",t.down),t.move&&e.addEventListener("pointermove",t.move),t.up&&(e.addEventListener("pointerup",t.up),e.addEventListener("pointercancel",t.up),e.addEventListener("pointerout",t.up),e.addEventListener("pointerleave",t.up)),t.wheel&&e.addEventListener("wheel",t.wheel,{passive:!1})},unbind:()=>{t.down&&e.removeEventListener("pointerdown",t.down),t.move&&e.removeEventListener("pointermove",t.move),t.up&&(e.removeEventListener("pointerup",t.up),e.removeEventListener("pointercancel",t.up),e.removeEventListener("pointerout",t.up),e.removeEventListener("pointerleave",t.up)),t.wheel&&e.removeEventListener("wheel",t.wheel)}}}function n(e,t,n=0,r=1,i=0,o=1,a="control"){const l=Object.assign(document.createElement("div"),{className:a}),u=Object.assign(document.createElement("label"),{textContent:t}),c=Object.assign(document.createElement("input"),{type:"range",id:t,name:t,step:r.toString(),min:i.toString(),max:o.toString(),value:n.toString()}),s=Object.assign(document.createElement("span"),{className:"tooltip",id:t+"-tooltip",textContent:n.toString()});return u.setAttribute("for",t),c.addEventListener("input",(()=>{s.textContent=c.value})),l.append(u,c,s),e.appendChild(l),c}function r(e,t,n,r){const i=e.createBuffer();function o(){e.bindBuffer(t,i)}function a(r){e.bufferData(t,r,n)}return r&&(o(),a(r)),{buf:i,bind:o,initBuffer:a,set:function(n,r=0,i=0,o){e.bufferSubData(t,r,n,i,o)}}}const i=new Map;function o(e,t){const n=function(e,t,n){function r(t,n){if(i.has(n))return i.get(n);const r=e.createShader(t);if(e.shaderSource(r,n),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS))throw Error(e.getShaderInfoLog(r));return i.set(n,r),r}const o=e.createProgram(),a=r(e.VERTEX_SHADER,t),l=r(e.FRAGMENT_SHADER,n);if(e.attachShader(o,a),e.attachShader(o,l),e.linkProgram(o),!e.getProgramParameter(o,e.LINK_STATUS))throw Error(e.getProgramInfoLog(o));return o}(e,"#version 300 es\nin vec2 a;void main(){gl_Position=vec4(a,0,1);}",t),o=function(e){const t=e.createVertexArray();return{bind:()=>e.bindVertexArray(t),unbind:()=>e.bindVertexArray(null)}}(e);return e.useProgram(n),o.bind(),r(e,34962,35044,new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1])),function(e,t,n){for(let r=0;r<n.length;r++){const{name:i,size:o,type:a,normalized:l,stride:u,offset:c,divisor:s}=n[r],d=e.getAttribLocation(t,i);-1!==d&&(e.enableVertexAttribArray(d),e.vertexAttribPointer(d,o,a||e.FLOAT,l||!1,u||0,c||0),s&&e.vertexAttribDivisor(d,s))}}(e,n,[{name:"a",size:2}]),o.unbind(),[n,function(){e.useProgram(n),o.bind(),e.drawArrays(4,0,6)}]}function a(e,t,n,r=0){const i=e.getUniformBlockIndex(t,n);function o(n=0){e.uniformBlockBinding(t,i,n)}return o(r),[e.getActiveUniformBlockParameter(t,i,e.UNIFORM_BLOCK_DATA_SIZE),o]}function l(e,t,n=0,i){const o=r(e,e.UNIFORM_BUFFER,e.STATIC_DRAW,new ArrayBuffer(t));return o.bindBuffer=function(t=0){e.bindBufferBase(e.UNIFORM_BUFFER,t,o.buf)},o.bindBuffer(n),i&&o.set(i),o}var u=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function l(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}u((r=r.apply(e,t||[])).next())}))};var c=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function l(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}u((r=r.apply(e,t||[])).next())}))};!function(){u(this,void 0,void 0,(function*(){const n=document.getElementById("background"),[r,u,c]=e(n);let s=yield fetch("./shaders/background.fs").then((e=>e.text())),[d,m]=o(r,s);i.clear();const[f]=a(r,d,"I",0),p=l(r,f,0,new Float32Array([0,0,n.clientWidth,n.clientHeight,0,1])),h=document.getElementById("bg-fullscreen"),v=document.getElementById("bg-container"),g=document.getElementById("bg-fullscreen-container");let w;h.onclick=()=>{document.fullscreenElement?(document.exitFullscreen(),h.value="ðŸ”³"):(v.requestFullscreen(),h.value="ðŸ”²")},n.ondblclick=e=>{e.preventDefault(),g.style.display="none"===g.style.display?"flex":"none"};let b=[],y=1,A=0;t(n,{down:e=>{b.push(e),1===b.length&&n.setPointerCapture(e.pointerId),3===b.length&&(g.style.display="none"===g.style.display?"flex":"none")},move:e=>{let t=b.findIndex((t=>t.pointerId===e.pointerId));if(b[t]=e,1===b.length)p.set(new Float32Array([2*e.offsetX/n.clientWidth-1,2*-e.offsetY/n.clientHeight+1]),0);else if(2===b.length&&e.isPrimary){const[e,t]=b,n=Math.hypot(e.clientX-t.clientX,e.clientY-t.clientY);if(0===A)return A=n;p.set(new Float32Array([y=Math.max(y+(n-A)*y*w*4,.5)]),20),A=n}},up:e=>{b=b.filter((t=>t.pointerId!==e.pointerId)),b.length<2&&(A=0),n.releasePointerCapture(e.pointerId)},wheel:e=>{e.preventDefault(),p.set(new Float32Array([y=Math.max(y-e.deltaY*y*w,.5)]),20)}}).bind(),window.addEventListener("resize",(()=>{const[e,t]=c();u(e,t),w=2/t,p.set(new Float32Array([2/e,w]),8)})),window.dispatchEvent(new Event("resize")),r.useProgram(d),r.clearColor(0,0,0,1),requestAnimationFrame((function e(t){r.clear(r.COLOR_BUFFER_BIT),p.set(new Float32Array([5e-5*t]),16),m(),requestAnimationFrame(e)}))}))}(),function(){c(this,void 0,void 0,(function*(){const r=document.getElementById("mandelbrot-canvas"),[i,u,c]=e(r);let s=yield fetch("./shaders/mandelbrot.fs").then((e=>e.text())),[d,m]=o(i,s),f=window.devicePixelRatio;const p=document.getElementById("mandelbrot"),h=document.getElementById("panel"),v=n(h,"Resolution scale",f,f/8,f/2,2*f),g=n(h,"Zoom",0,1e-4,0,12),w=n(h,"Min Iterations",80,1,1,400),b=n(h,"Max Iterations",400,1,80,1e3),y=n(h,"Min Escape Radius",6,1e-4,2,10),A=n(h,"Max Escape Radius",5e3,1e-4,6,1e4),E=n(h,"Hue",.6,1e-4,0,1);p.ondblclick=e=>{e.preventDefault(),h.style.display="none"===h.style.display?"flex":"none"};const[F]=a(i,d,"I",0),I=l(i,F,0,new Float32Array([r.clientWidth*f,r.clientHeight*f,-.74,.18,0,0]));let x,B=[],L=0,P=-.74,S=.18,M=Math.exp(-L),R=0;function C(e){M=Math.exp(-e),I.bind(),I.set(new Float32Array([e]),20)}t(r,{down:e=>{B.push(e),1===B.length&&r.setPointerCapture(e.pointerId),3===B.length&&(h.style.display="none"===h.style.display?"flex":"none")},move:e=>{let t=B.findIndex((t=>t.pointerId===e.pointerId));if(B[t]=e,1===B.length&&(P-=e.movementX*M*x,S+=e.movementY*M*x,I.bind(),I.set(new Float32Array([P,S]),8)),2===B.length&&e.isPrimary){const[e,t]=B,n=Math.hypot(e.clientX-t.clientX,e.clientY-t.clientY);if(0===R)return R=n;L+=(n-R)*x*2,R=n,g.value=L.toString(),C(L)}requestAnimationFrame(U)},up:e=>{B=B.filter((t=>t.pointerId!==e.pointerId)),B.length<2&&(R=0),r.releasePointerCapture(e.pointerId)},wheel:e=>{e.preventDefault(),C(L-=e.deltaY*x),g.value=L.toString(),requestAnimationFrame(U)}}).bind(),window.addEventListener("resize",(()=>{const[e,t]=c(f);u(e,t),x=2/r.clientHeight,I.bind(),I.set(new Float32Array([e,t])),requestAnimationFrame(U)})),window.dispatchEvent(new Event("resize"));const[T]=a(i,d,"U",1),q=l(i,T,1,new Uint32Array([80,400]));q.set(new Float32Array([6,5e3,-.8090169943749475,.05749048755480921,.8711414803576415]),8),v.oninput=()=>{f=v.valueAsNumber;const[e,t]=c(f);u(e,t),x=2/r.clientHeight,I.bind(),I.set(new Float32Array([e,t])),requestAnimationFrame(U)},g.oninput=()=>{L=g.valueAsNumber,C(L),requestAnimationFrame(U)},w.oninput=()=>{b.min=w.value,q.bind(),q.set(new Uint32Array([w.valueAsNumber]),0),requestAnimationFrame(U)},b.oninput=()=>{w.max=b.value,q.bind(),q.set(new Uint32Array([b.valueAsNumber]),4),requestAnimationFrame(U)},y.oninput=()=>{A.min=y.value,q.bind(),q.set(new Float32Array([y.valueAsNumber]),8),requestAnimationFrame(U)},A.oninput=()=>{q.bind(),q.set(new Float32Array([A.valueAsNumber]),12),requestAnimationFrame(U)},E.oninput=()=>{const e=E.valueAsNumber*Math.PI*2;q.bind(),q.set(new Float32Array([Math.cos(e),Math.cos(e+1),Math.cos(e+2)]),16),requestAnimationFrame(U)};const N=document.getElementById("mb-fullscreen");function U(){i.clear(i.COLOR_BUFFER_BIT),m()}N.onclick=()=>{document.fullscreenElement?(document.exitFullscreen(),N.value="ðŸ”³"):(p.requestFullscreen(),N.value="ðŸ”²")},i.useProgram(d),i.clearColor(0,0,0,1),requestAnimationFrame(U)}))}()})(),e.p,e.p,e.p})();